{"ast":null,"code":"var fs = require(\"fs\");\n\nvar request = require(\"request\");\n\nlet nsfw = function (image_path, type, API_KEY) {\n  return new Promise((resolve, reject) => {\n    if (typeof image_path == \"string\" && image_path.length > 0) {\n      if (type == 'local') {\n        var options = {\n          method: 'POST',\n          url: 'http://apis.paralleldots.com/v4/nsfw',\n          headers: {\n            'cache-control': 'no-cache',\n            'content-type': 'multipart/form-data;'\n          },\n          formData: {\n            api_key: API_KEY,\n            file: {\n              value: fs.createReadStream(image_path),\n              options: {\n                filename: image_path.split('/').splice(-1).toString(),\n                contentType: null\n              }\n            }\n          }\n        };\n      } else {\n        var options = {\n          method: 'POST',\n          url: 'https://apis.paralleldots.com/v3/nsfw',\n          headers: {\n            'Cache-Control': 'no-cache',\n            'content-type': 'multipart/form-data;'\n          },\n          formData: {\n            url: image_path,\n            api_key: API_KEY\n          }\n        };\n      }\n\n      request(options, function (error, response, body) {\n        if (error) reject({\n          \"Error\": error\n        });\n        resolve(body);\n      });\n    } else {\n      reject({\n        \"Error\": \"Please provide the path of image file\"\n      });\n    }\n  });\n};\n\nmodule.exports = nsfw;","map":{"version":3,"sources":["/Users/thatchampion/Desktop/Ironhack/Project4/node_modules/paralleldots/apis/nsfw.js"],"names":["fs","require","request","nsfw","image_path","type","API_KEY","Promise","resolve","reject","length","options","method","url","headers","formData","api_key","file","value","createReadStream","filename","split","splice","toString","contentType","error","response","body","module","exports"],"mappings":"AAAA,IAAIA,EAAE,GAAGC,OAAO,CAAC,IAAD,CAAhB;;AACA,IAAIC,OAAO,GAAGD,OAAO,CAAC,SAAD,CAArB;;AAEA,IAAIE,IAAI,GAAG,UAASC,UAAT,EAAoBC,IAApB,EAAyBC,OAAzB,EAAiC;AAC3C,SAAO,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAASC,MAAT,KAAoB;AAEtC,QAAG,OAAOL,UAAP,IAAsB,QAAtB,IAAkCA,UAAU,CAACM,MAAX,GAAkB,CAAvD,EAAyD;AACxD,UAAGL,IAAI,IAAE,OAAT,EAAiB;AACjB,YAAIM,OAAO,GAAG;AACbC,UAAAA,MAAM,EAAE,MADK;AAEbC,UAAAA,GAAG,EAAE,sCAFQ;AAGbC,UAAAA,OAAO,EACP;AACC,6BAAiB,UADlB;AAEC,4BAAgB;AAFjB,WAJa;AASZC,UAAAA,QAAQ,EACR;AACCC,YAAAA,OAAO,EAAEV,OADV;AAECW,YAAAA,IAAI,EACJ;AACCC,cAAAA,KAAK,EAAElB,EAAE,CAACmB,gBAAH,CAAoBf,UAApB,CADR;AAECO,cAAAA,OAAO,EACP;AACCS,gBAAAA,QAAQ,EAAEhB,UAAU,CAACiB,KAAX,CAAiB,GAAjB,EAAsBC,MAAtB,CAA6B,CAAC,CAA9B,EAAiCC,QAAjC,EADX;AAECC,gBAAAA,WAAW,EAAE;AAFd;AAHD;AAHD;AAVY,SAAd;AA2BA,OA5BA,MA6BG;AACF,YAAIb,OAAO,GAAG;AACdC,UAAAA,MAAM,EAAE,MADM;AAEdC,UAAAA,GAAG,EAAE,uCAFS;AAGdC,UAAAA,OAAO,EACN;AACA,6BAAiB,UADjB;AAEA,4BAAgB;AAFhB,WAJa;AAOdC,UAAAA,QAAQ,EAER;AAAEF,YAAAA,GAAG,EAAET,UAAP;AACAY,YAAAA,OAAO,EAACV;AADR;AATc,SAAd;AAWD;;AACAJ,MAAAA,OAAO,CAACS,OAAD,EAAU,UAAUc,KAAV,EAAiBC,QAAjB,EAA2BC,IAA3B,EAAiC;AACjD,YAAIF,KAAJ,EAAWhB,MAAM,CAAC;AAAC,mBAAQgB;AAAT,SAAD,CAAN;AACXjB,QAAAA,OAAO,CAACmB,IAAD,CAAP;AACA,OAHM,CAAP;AAIA,KA/CD,MAgDI;AACHlB,MAAAA,MAAM,CAAC;AAAC,iBAAQ;AAAT,OAAD,CAAN;AACA;AACD,GArDM,CAAP;AAsDA,CAvDD;;AA0DAmB,MAAM,CAACC,OAAP,GAAiB1B,IAAjB","sourcesContent":["var fs = require(\"fs\");\nvar request = require(\"request\");\n\nlet nsfw = function(image_path,type,API_KEY){\n\treturn new Promise((resolve,reject) => {\n\t\t\n\t\tif(typeof(image_path) == \"string\" && image_path.length>0){\n\t\t\tif(type=='local'){\n\t\t\tvar options = { \n\t\t\t\tmethod: 'POST',\n\t\t\t\turl: 'http://apis.paralleldots.com/v4/nsfw',\n\t\t\t\theaders: \n\t\t\t\t{\n\t\t\t\t\t'cache-control': 'no-cache',\n\t\t\t\t\t'content-type': 'multipart/form-data;' \n\t\t\t\t},\n\t\t\t\t\n\t\t\t\t\tformData: \n\t\t\t\t\t{ \n\t\t\t\t\t\tapi_key: API_KEY ,\n\t\t\t\t\t\tfile: \n\t\t\t\t\t\t{ \n\t\t\t\t\t\t\tvalue: fs.createReadStream(image_path),\n\t\t\t\t\t\t\toptions: \n\t\t\t\t\t\t\t{ \n\t\t\t\t\t\t\t\tfilename: image_path.split('/').splice(-1).toString(),\n\t\t\t\t\t\t\t\tcontentType: null \n\t\t\t\t\t\t\t} \n\t\t\t\t\t\t} \n\t\t\t\t\t} \n\t\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t};\n\t\t}\n\t\telse{\n\t\t\t\tvar options = { \n\t\t\t\tmethod: 'POST',\n\t\t\t\turl: 'https://apis.paralleldots.com/v3/nsfw',\n\t\t\t\theaders: \n\t\t\t\t\t{ \n\t\t\t\t\t'Cache-Control': 'no-cache',\n\t\t\t\t\t'content-type': 'multipart/form-data;' },\n\t\t\t\tformData: \n\t\t\t\t\n\t\t\t\t{ url: image_path,\n\t\t\t\tapi_key:API_KEY  } };\n\t\t}\n\t\t\trequest(options, function (error, response, body) {\n\t\t\t\tif (error) reject({\"Error\":error});\n\t\t\t\tresolve(body);\n\t\t\t});\n\t\t}\n\t\telse{\n\t\t\treject({\"Error\":\"Please provide the path of image file\"})\n\t\t}\n\t})\n}\n\n\nmodule.exports = nsfw;\n"]},"metadata":{},"sourceType":"script"}